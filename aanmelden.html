<!DOCTYPE html>
<html lang="nl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Aanmelden voor Plan A - Sidhadorp Wooncoöperatie</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <header>
      <div class="container mx-auto px-4">
        <div
          class="flex flex-col md:flex-row md:justify-between md:items-center py-4"
        >
          <div class="logo mb-4 md:mb-0">
            <h1 class="text-2xl font-bold">Sidhadorp Wooncoöperatie</h1>
          </div>
          <nav>
            <ul class="flex flex-wrap gap-2 justify-center md:justify-start">
              <li>
                <a
                  href="index.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >Home</a
                >
              </li>
              <li>
                <a
                  href="plan-a.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >Plan A</a
                >
              </li>
              <li>
                <a
                  href="plan-b.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >Plan B</a
                >
              </li>
              <li>
                <a
                  href="plan-a-financieel.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >Financiële Analyse</a
                >
              </li>
              <li>
                <a
                  href="woningen.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >Woningen</a
                >
              </li>
              <li>
                <a
                  href="faq.html"
                  class="px-3 py-2 rounded hover:bg-blue-100 transition-colors duration-200"
                  >FAQ</a
                >
              </li>
              <li>
                <a
                  href="aanmelden.html"
                  class="px-3 py-2 rounded bg-blue-100 transition-colors duration-200"
                  >Aanmelden</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <section class="py-16">
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <div class="max-w-2xl mx-auto">
          <div class="bg-white p-8 rounded-lg shadow-lg">
            <h2 class="text-3xl font-bold text-blue-800 mb-6">
              Aanmelden voor Plan A
            </h2>
            <p class="mb-8 text-lg">
              Bent u enthousiast over Plan A en wilt u zich aanmelden als
              geïnteresseerde? Vul dan onderstaand formulier in. U wordt dan op
              de hoogte gehouden van de ontwikkelingen en krijgt voorrang bij de
              definitieve aanmelding.
            </p>

            <form id="registrationForm" class="space-y-6">
              <div class="flex gap-4">
                <div class="flex-1">
                  <label
                    for="voornaam"
                    class="block text-gray-700 mb-1 font-medium"
                    >Voornaam</label
                  >
                  <input
                    type="text"
                    id="voornaam"
                    name="voornaam"
                    class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Uw voornaam"
                    required
                  />
                </div>
                <div class="flex-1">
                  <label
                    for="achternaam"
                    class="block text-gray-700 mb-1 font-medium"
                    >Achternaam</label
                  >
                  <input
                    type="text"
                    id="achternaam"
                    name="achternaam"
                    class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Uw achternaam"
                    required
                  />
                </div>
              </div>
              <div>
                <label for="email" class="block text-gray-700 mb-1 font-medium"
                  >E-mailadres</label
                >
                <input
                  type="email"
                  id="email"
                  name="email"
                  class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="uw@email.nl"
                  required
                />
              </div>
              <div class="flex gap-4">
                <div class="flex-1">
                  <label
                    for="aanmeld-straat"
                    class="block text-gray-700 mb-1 font-medium"
                    >Straat</label
                  >
                  <select
                    id="straat"
                    name="straat"
                    class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    required
                  >
                    <option value="" disabled selected>
                      Selecteer uw straat
                    </option>
                    <option value="Amer">Amer</option>
                    <option value="Donaustraat">Donaustraat</option>
                    <option value="Maasstraat">Maasstraat</option>
                    <option value="Moezelstraat">Moezelstraat</option>
                    <option value="Rijnstraat">Rijnstraat</option>
                    <option value="Rivierenlaan">Rivierenlaan</option>
                    <option value="Scheldestraat">Scheldestraat</option>
                    <option value="Waalstraat">Waalstraat</option>
                  </select>
                </div>
                <div class="w-1/3">
                  <label
                    for="huisnummer"
                    class="block text-gray-700 mb-1 font-medium"
                    >Huisnummer</label
                  >
                  <input
                    type="text"
                    id="huisnummer"
                    name="huisnummer"
                    class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Nr."
                    required
                  />
                </div>
              </div>

              <div>
                <label
                  for="telefoonnummer"
                  class="block text-gray-700 mb-1 font-medium"
                  >Telefoonnummer</label
                >
                <input
                  type="tel"
                  id="telefoonnummer"
                  name="telefoonnummer"
                  class="w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                  placeholder="Uw telefoonnummer"
                />
              </div>
              <div class="pt-4">
                <button
                  type="submit"
                  class="w-full bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
                >
                  Meld u aan
                </button>
              </div>

              <div id="message" class="mt-4 text-center hidden"></div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="container mx-auto px-4 sm:px-6 lg:px-8">
        <p>&copy; 2025 Sidhadorp Wooncoöperatie</p>
      </div>
    </footer>
  </body>
</html>

<script>
  document
    .getElementById("registrationForm")
    .addEventListener("submit", async (e) => {
      e.preventDefault();

      const formData = new FormData(e.target);
      const messageDiv = document.getElementById("message");

      // Add this before the fetch call to debug
      console.log("Form data contents:");
      for (const pair of formData.entries()) {
        console.log(`${pair[0]}: ${pair[1]}`);
      }

      try {
        const response = await fetch("http://127.0.0.1:8000/api/register/", {
          method: "POST",
          body: formData,
        });

        const result = await response.json();

        messageDiv.textContent = result.message;
        messageDiv.className = result.success
          ? "mt-4 text-center text-green-600"
          : "mt-4 text-center text-red-600";
        messageDiv.classList.remove("hidden");

        if (result.success) {
          e.target.reset();
        }
      } catch (error) {
        console.error("Error:", error);
        messageDiv.textContent = "An error occurred. Please try again.";
        messageDiv.className = "mt-4 text-center text-red-600";
        messageDiv.classList.remove("hidden");
      }
    });
</script>
